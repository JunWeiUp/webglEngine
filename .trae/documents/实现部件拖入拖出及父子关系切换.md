我将通过完善 `InteractionManager.ts` 中的交互逻辑来实现部件的拖入拖出（切换父子关系）功能。

具体计划如下：

1.  **修改 `src/engine/events/InteractionManager.ts`**：
    *   **增加后代检查**：在改变父子关系前，检查目标节点是否是当前拖拽节点的子节点，防止出现循环引用的错误（即防止父节点被拖入自己的子节点中）。
    *   **实现“拖出”逻辑**：在 `onMouseUp` 中，如果鼠标释放时没有命中任何特定的交互对象（`hit` 为空），则默认将该节点移动到根场景（`this.scene`）中。这意味着当用户将物体拖出容器并放置在空白区域时，它会成为根节点的一员。
    *   **完善“拖入”逻辑**：保留并优化现有的逻辑，当用户将物体拖到另一个可交互的 `Container` 上时，将其重新挂载为该容器的子节点。
    *   **坐标系转换**：确保在切换父节点时，物体的世界坐标保持不变，自动计算新的局部坐标。

2.  **验证**：
    *   验证将物体从容器拖到空白处（变为根节点子物体）。
    *   验证将物体从空白处拖到容器内（变为容器子物体）。
    *   验证嵌套拖拽的稳定性。

所有新的代码注释和说明将按照您的要求使用中文。