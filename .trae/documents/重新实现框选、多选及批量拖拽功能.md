看来您确实是不小心撤回了代码，目前的 `InteractionManager.ts` 和 `AuxiliaryLayer.ts` 已经回退到了没有框选和多选功能的状态。

我将重新实施之前的计划，一次性为您恢复并完善这些功能。

**恢复与实现计划**：

1.  **重构 `AuxiliaryLayer.ts`**：
    *   将 `selectedNode` 升级为 `selectedNodes: Set<Node>` 以支持多选。
    *   添加 `selectionRect` 属性用于绘制框选区域。
    *   更新 `render` 方法，绘制所有选中物体的包围盒以及框选矩形。
    *   保留 `selectedNode` 的 getter/setter 以兼容旧代码。

2.  **重构 `InteractionManager.ts`**：
    *   **框选逻辑**：
        *   添加 `isBoxSelecting` 状态。
        *   `onMouseDown`：按住 Shift 键时进入框选模式。
        *   `onMouseMove`：更新框选矩形。
        *   `onMouseUp`：计算框选结果，使用 `boxSelect` 递归检测 AABB 相交，将命中的物体加入 `selectedNodes`。
    *   **批量拖拽逻辑**：
        *   `onMouseDown`：如果点击已选中的物体，不清除选择，而是设置为主拖拽对象。
        *   `onMouseMove`：
            *   计算鼠标位移 `delta`。
            *   使用 `getTopLevelSelectedNodes` 辅助方法，筛选出所有最顶层的选中节点（避免父子同时选中时的双重移动）。
            *   对每个顶层选中节点，计算其局部空间的位移并应用。
        *   `onMouseUp`：
            *   如果拖拽到了有效容器（`dragTargetNode`），将所有顶层选中节点 Reparent 到该容器。

这次我将直接把这两个文件的修改一次性应用，确保功能完整恢复。